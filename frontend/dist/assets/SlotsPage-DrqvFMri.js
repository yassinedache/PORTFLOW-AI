import{j as e,a as x,u as p}from"./vendor-query-CF9v-Zna.js";import{B as h,P,C as u,c as j,a as q,b as E}from"./card-BhKIbSNR.js";import{c as I,j as f,D as k,q as g,e as D,k as d,l as F}from"./index-CEOHBZb-.js";import{Z as A}from"./zap-6YYQRR_u.js";import{E as L}from"./EmptyState-CSoHTzce.js";import{P as B}from"./Skeletons-CfQltb1a.js";import{S as K,a as $,b as M,c as O,d as R}from"./select-BcYq-aZE.js";import{I as Z}from"./input-DYGPj4ji.js";import{L as N}from"./label-BxPWq3jm.js";import{a as H}from"./admin-C8fNhm0J.js";import{c as v}from"./carrier-DbPZWpzb.js";import{m as b}from"./vendor-motion-BvnwsIwX.js";import{T as V}from"./trending-up-BqOhrqLL.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-http-BN7VjlME.js";import"./chevron-down-CVmmBZsX.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=I("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);function Q({price:t,isEcoSlot:o,isPriority:r,className:l}){return o?e.jsxs(h,{variant:"success",className:l,children:[e.jsx(S,{className:"h-3 w-3"}),e.jsx("span",{className:"ml-1",children:f(t)}),e.jsx("span",{className:"ml-1 text-[10px] opacity-75",children:"ECO"})]}):r?e.jsxs(h,{variant:"accent",className:l,children:[e.jsx(A,{className:"h-3 w-3"}),e.jsx("span",{className:"ml-1",children:f(t)}),e.jsx("span",{className:"ml-1 text-[10px] opacity-75",children:"PRIORITY"})]}):e.jsxs(h,{variant:"default",className:l,children:[e.jsx(k,{className:"h-3 w-3"}),e.jsx("span",{className:"ml-1",children:f(t)})]})}function oe(){const[t,o]=x.useState(""),[r,l]=x.useState(new Date().toISOString().split("T")[0]),[a,w]=x.useState(null),{data:m}=p({queryKey:g.terminals,queryFn:H.getTerminals}),{data:n,isLoading:C}=p({queryKey:g.slotsAvailability(t,r),queryFn:()=>v.getAvailability(t,r),enabled:!!t&&!!r}),{data:i}=p({queryKey:g.slotPricing((a==null?void 0:a.id)||""),queryFn:()=>v.getSlotPricing(a.id),enabled:!!a});return e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Time Slots"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse available slots and pricing"})]}),e.jsx(u,{children:e.jsxs(j,{className:"flex flex-wrap items-end gap-4 py-4",children:[e.jsxs("div",{className:"w-60 space-y-2",children:[e.jsx(N,{children:"Terminal"}),e.jsxs(K,{value:t,onValueChange:o,children:[e.jsx($,{children:e.jsx(M,{placeholder:"Select terminal"})}),e.jsx(O,{children:m==null?void 0:m.map(s=>e.jsx(R,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"w-48 space-y-2",children:[e.jsx(N,{children:"Date"}),e.jsx(Z,{type:"date",value:r,onChange:s=>l(s.target.value)})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"space-y-4 lg:col-span-2",children:C?e.jsx(B,{}):n!=null&&n.length?e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:n.map((s,y)=>{const c=s.capacity>0?s.bookedCount/s.capacity*100:0,T=(a==null?void 0:a.id)===s.id;return e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:y*.03},whileHover:{y:-2},onClick:()=>w(s),className:`glass cursor-pointer rounded-xl p-4 transition-all ${T?"glow-border ring-1 ring-primary/30":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-semibold",children:[d(s.startTime)," –"," ",d(s.endTime)]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.availableCount,"/",s.capacity]})]}),e.jsx("div",{className:"mt-3 h-2 overflow-hidden rounded-full bg-secondary",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${c}%`},transition:{duration:.5,delay:y*.03},className:`h-full rounded-full ${c>80?"bg-destructive":c>50?"bg-warning":"bg-success"}`})}),e.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:[c.toFixed(0),"% booked"]})]},s.id)})}):e.jsx(u,{children:e.jsx(j,{children:e.jsx(L,{title:t?"No slots available":"Select a terminal",description:t?"Try a different date":"Choose a terminal and date to see available slots",icon:e.jsx(D,{className:"h-8 w-8 text-muted-foreground"})})})})}),e.jsx("div",{children:e.jsxs(u,{children:[e.jsx(q,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-primary"}),"Slot Details"]})}),e.jsx(j,{children:a&&i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time"}),e.jsxs("p",{className:"font-medium",children:[d(a.startTime)," –"," ",d(a.endTime)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Date"}),e.jsx("p",{className:"font-medium",children:F(a.startTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Availability"}),e.jsxs("p",{className:"font-medium",children:[a.availableCount," / ",a.capacity," ","slots"]})]}),e.jsxs("div",{className:"rounded-lg bg-secondary/50 p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Base Price"}),e.jsxs("span",{children:["$",i.basePrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Multiplier"}),e.jsxs("span",{children:[i.multiplier.toFixed(2),"x"]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-semibold border-t border-border/50 pt-2",children:[e.jsx("span",{children:"Final Price"}),e.jsx(Q,{price:i.finalPrice,isEcoSlot:i.isEcoSlot})]}),i.isEcoSlot&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-success",children:[e.jsx(S,{className:"h-3 w-3"}),"Eco-friendly slot — discounted!"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.reason})]})]}):e.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"Select a slot to see pricing"})})]})})]})]})})}export{oe as default};
