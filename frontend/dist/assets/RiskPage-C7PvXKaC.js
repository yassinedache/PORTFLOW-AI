const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RiskChart-C4l38b_g.js","assets/vendor-query-CF9v-Zna.js","assets/card-BhKIbSNR.js","assets/index-CEOHBZb-.js","assets/vendor-react-lqZWVjLj.js","assets/vendor-charts-sdUO6Spa.js","assets/vendor-radix-D-AkJh5d.js","assets/vendor-motion-BvnwsIwX.js","assets/vendor-http-BN7VjlME.js","assets/index-6pwI-LJU.css"])))=>i.map(i=>d[i]);
import{v as k,S as m,h as S,_ as w,q as R}from"./index-CEOHBZb-.js";import{u as C,j as e,a as p}from"./vendor-query-CF9v-Zna.js";import{P as b,C as x,c as h,a as _,b as T,B as A,S as M}from"./card-BhKIbSNR.js";import{E as B}from"./EmptyState-CSoHTzce.js";import{M as t}from"./MetricCard-gxQkTWwy.js";import{C as E}from"./Skeletons-CfQltb1a.js";import{o as q}from"./operator-CmVVUFZE.js";import{T as L}from"./trending-up-BqOhrqLL.js";import{m as P}from"./vendor-motion-BvnwsIwX.js";import{b as $}from"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-http-BN7VjlME.js";const D=p.lazy(()=>w(()=>import("./RiskChart-C4l38b_g.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));function Y(){const u=$(),{data:j,isLoading:g}=C({queryKey:R.operatorQueue(),queryFn:()=>q.getQueue()}),i=(j??[]).filter(s=>s.readinessScore!=null).sort((s,a)=>(s.readinessScore??1)-(a.readinessScore??1)),f=i.filter(s=>(s.readinessScore??1)<.4),v=i.filter(s=>(s.readinessScore??1)>=.4&&(s.readinessScore??1)<.7),N=i.filter(s=>(s.readinessScore??1)>=.7),o=i.slice(0,15).map(s=>{var a,r;return{name:((r=(a=s.terminal)==null?void 0:a.name)==null?void 0:r.slice(0,10))||s.id.slice(0,6),score:Math.round((s.readinessScore??0)*100)}});return e.jsx(b,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Risk Assessment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor booking readiness and take preventive actions"})]}),g?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:Array.from({length:3}).map((s,a)=>e.jsx(E,{},a))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(t,{title:"High Risk",value:f.length,icon:e.jsx(k,{className:"h-5 w-5"}),color:"red"}),e.jsx(t,{title:"Medium Risk",value:v.length,icon:e.jsx(L,{className:"h-5 w-5"}),color:"yellow"}),e.jsx(t,{title:"Low Risk",value:N.length,icon:e.jsx(m,{className:"h-5 w-5"}),color:"emerald"})]}),o.length>0&&e.jsx(p.Suspense,{fallback:e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsx("div",{className:"h-64 animate-shimmer rounded-lg"})})}),children:e.jsx(D,{chartData:o})}),e.jsxs(x,{children:[e.jsx(_,{children:e.jsx(T,{className:"text-base",children:"At-Risk Bookings"})}),e.jsx(h,{className:"p-0",children:i.length?e.jsx("div",{className:"divide-y divide-border/50",children:i.map((s,a)=>{var d,c;const r=s.readinessScore??0,y=r<.4?"High":r<.7?"Medium":"Low",l=r<.4?"text-red-400":r<.7?"text-yellow-400":"text-emerald-400",n=r<.4?"bg-red-500/10 border-red-500/30":r<.7?"bg-yellow-500/10 border-yellow-500/30":"bg-emerald-500/10 border-emerald-500/30";return e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:a*.03},onClick:()=>u(`/app/operator/bookings/${s.id}`),className:"flex items-center justify-between px-4 py-3 hover:bg-foreground/5 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-sm font-bold ${l} border ${n}`,children:Math.round(r*100)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:((d=s.terminal)==null?void 0:d.name)||"Terminal"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((c=s.container)==null?void 0:c.containerNumber)||s.id.slice(0,8)," Â· ",S(s.createdAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(A,{className:`${n} ${l} border text-xs`,children:[y," Risk"]}),e.jsx(M,{status:s.status})]})]},s.id)})}):e.jsx(B,{title:"No risk data",description:"Readiness predictions will appear here",icon:e.jsx(m,{className:"h-8 w-8 text-muted-foreground"})})})]})]})]})})}export{Y as default};
