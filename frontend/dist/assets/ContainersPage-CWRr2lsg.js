import{f as R,a as f,u as A,h as D,j as e}from"./vendor-query-CF9v-Zna.js";import{c as E,w as s,i as v,h as w,B as p,b as N,q as y}from"./index-CEOHBZb-.js";import{P as I,C as k,c as q,S as L}from"./card-BhKIbSNR.js";import{E as O}from"./EmptyState-CSoHTzce.js";import{T as Q}from"./Skeletons-CfQltb1a.js";import{T as Y,a as _,b as P,c,d as U,e as u}from"./table-BH3eB_Rj.js";import{D as B,a as F,b as K,c as H}from"./dialog-BAM1R5W1.js";import{o as C}from"./operator-CmVVUFZE.js";import{m as M}from"./vendor-motion-BvnwsIwX.js";import{L as z}from"./loader-circle-p231RGTX.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-http-BN7VjlME.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=E("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),o=[s.NOT_ARRIVED,s.IN_YARD,s.READY,s.RELEASED],T={[s.NOT_ARRIVED]:"Not Arrived",[s.IN_YARD]:"In Yard",[s.READY]:"Ready",[s.RELEASED]:"Released"};function oe(){const h=R(),[r,d]=f.useState(null),[l,j]=f.useState(s.IN_YARD),{data:m,isLoading:S}=A({queryKey:y.operatorQueue(),queryFn:()=>C.getQueue()}),g=(m==null?void 0:m.filter(t=>t.container).map(t=>t.container).filter((t,a,n)=>n.findIndex(i=>i.id===t.id)===a))??[],x=D({mutationFn:({containerId:t,status:a})=>C.updateContainerStatus(t,{status:a}),onSuccess:()=>{N.success("Container status updated"),d(null),h.invalidateQueries({queryKey:["operator","queue"]}),h.invalidateQueries({queryKey:y.containers})},onError:()=>N.error("Failed to update status")});return e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Container Operations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track and update container statuses"})]}),e.jsx(k,{children:e.jsx(q,{className:"p-0",children:S?e.jsx("div",{className:"p-6",children:e.jsx(Q,{})}):g.length?e.jsxs(Y,{children:[e.jsx(_,{children:e.jsxs(P,{children:[e.jsx(c,{children:"Container #"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Created"}),e.jsx(c,{className:"text-right",children:"Actions"})]})}),e.jsx(U,{children:g.map((t,a)=>e.jsxs(M.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:a*.03},className:"border-b border-border/50",children:[e.jsx(u,{className:"font-mono text-sm font-medium",children:t.containerNumber}),e.jsx(u,{children:e.jsx(L,{status:t.status})}),e.jsx(u,{className:"text-sm text-muted-foreground",children:w(t.createdAt)}),e.jsx(u,{className:"text-right",children:e.jsxs(p,{size:"sm",variant:"outline",onClick:()=>{d(t);const n=o.indexOf(t.status),i=n+1;n>=0&&i<o.length&&j(o[i])},children:[e.jsx(b,{className:"h-3.5 w-3.5 mr-1"}),"Update Status"]})})]},t.id))})]}):e.jsx(O,{title:"No containers",description:"Containers appear when carriers create bookings",icon:e.jsx(v,{className:"h-8 w-8 text-muted-foreground"})})})}),e.jsx(B,{open:!!r,onOpenChange:()=>d(null),children:e.jsxs(F,{children:[e.jsx(K,{children:e.jsx(H,{children:"Update Container Status"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Container:"," ",e.jsx("span",{className:"font-mono font-medium text-foreground",children:r.containerNumber})]}),e.jsx("div",{className:"flex items-center gap-1.5 py-2",children:o.map((t,a)=>{const n=t===r.status,i=t===l;return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{type:"button",onClick:()=>j(t),className:`
                            px-2.5 py-1 rounded-md text-xs font-medium transition-all
                            ${n?"bg-cyan-500/20 text-cyan-400 ring-1 ring-cyan-500/40":i?"bg-emerald-500/20 text-emerald-400 ring-1 ring-emerald-500/40":"bg-foreground/5 text-muted-foreground hover:bg-foreground/10"}
                          `,children:T[t]}),a<o.length-1&&e.jsx(b,{className:"h-3 w-3 text-muted-foreground/50"})]},t)})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{variant:"outline",onClick:()=>d(null),children:"Cancel"}),e.jsxs(p,{variant:"glow",disabled:x.isPending||l===r.status,onClick:()=>x.mutate({containerId:r.id,status:l}),children:[x.isPending&&e.jsx(z,{className:"h-4 w-4 animate-spin mr-2"}),"Update to ",T[l]]})]})]})]})})]})})}export{oe as default};
