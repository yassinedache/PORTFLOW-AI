import{f as v,a as m,u as N,h as p,j as e}from"./vendor-query-CF9v-Zna.js";import{B as t,T as w,h as D,b as i,q as u}from"./index-CEOHBZb-.js";import{P as L,C as E,c as P}from"./card-BhKIbSNR.js";import{E as R}from"./EmptyState-CSoHTzce.js";import{T as F}from"./Skeletons-CfQltb1a.js";import{T as S,C as q}from"./ConfirmDialog-I5Y_R0U2.js";import{E as A}from"./ErrorAlert-DJ0FKV30.js";import{I as B}from"./input-DYGPj4ji.js";import{L as I}from"./label-BxPWq3jm.js";import{D as K,a as Q,b as H,c as M,d as O,e as $}from"./dialog-BAM1R5W1.js";import{T as z,a as U,b as G,c as o,d as J,e as n}from"./table-BH3eB_Rj.js";import{c as x}from"./carrier-DbPZWpzb.js";import{P as f}from"./plus-Bw4WFV0g.js";import{A as V,m as W}from"./vendor-motion-BvnwsIwX.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-http-BN7VjlME.js";import"./circle-alert-CA5_1Jce.js";function je(){const h=v(),[g,r]=m.useState(!1),[l,j]=m.useState(""),[c,d]=m.useState(null),{data:a,isLoading:T,isError:y,refetch:C}=N({queryKey:u.trucks,queryFn:x.getTrucks}),b=p({mutationFn:x.createTruck,onSuccess:()=>{h.invalidateQueries({queryKey:u.trucks}),r(!1),j(""),i.success("Truck registered")},onError:()=>i.error("Failed to register truck")}),k=p({mutationFn:x.deleteTruck,onSuccess:()=>{h.invalidateQueries({queryKey:u.trucks}),i.success("Truck deleted")},onError:()=>i.error("Failed to delete truck")});return y?e.jsx(A,{onRetry:C}):e.jsxs(L,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Trucks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your fleet"})]}),e.jsxs(t,{variant:"glow",onClick:()=>r(!0),children:[e.jsx(f,{className:"h-4 w-4"}),"Register Truck"]})]}),e.jsx(E,{children:e.jsx(P,{className:"p-0",children:T?e.jsx("div",{className:"p-6",children:e.jsx(F,{})}):a!=null&&a.length?e.jsxs(z,{children:[e.jsx(U,{children:e.jsxs(G,{children:[e.jsx(o,{children:"License Plate"}),e.jsx(o,{children:"Registered"}),e.jsx(o,{children:"Last Location"}),e.jsx(o,{className:"w-16"})]})}),e.jsx(J,{children:e.jsx(V,{children:a.map(s=>e.jsxs(W.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border-b border-border/50 transition-colors hover:bg-muted/30",children:[e.jsx(n,{className:"font-mono font-semibold",children:s.plate}),e.jsx(n,{className:"text-muted-foreground",children:D(s.createdAt)}),e.jsx(n,{className:"text-muted-foreground",children:s.latestLocation?`${s.latestLocation.lat.toFixed(4)}, ${s.latestLocation.lng.toFixed(4)}`:"â€”"}),e.jsx(n,{children:e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>d(s.id),children:e.jsx(S,{className:"h-4 w-4 text-destructive"})})})]},s.id))})})]}):e.jsx(R,{title:"No trucks registered",description:"Register your first truck to start booking",icon:e.jsx(w,{className:"h-8 w-8 text-muted-foreground"}),action:e.jsxs(t,{variant:"outline",onClick:()=>r(!0),children:[e.jsx(f,{className:"mr-1 h-4 w-4"}),"Register Truck"]})})})})]}),e.jsx(K,{open:g,onOpenChange:r,children:e.jsxs(Q,{children:[e.jsxs(H,{children:[e.jsx(M,{children:"Register Truck"}),e.jsx(O,{children:"Add a new truck to your fleet"})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"License Plate"}),e.jsx(B,{value:l,onChange:s=>j(s.target.value.toUpperCase()),placeholder:"ABC-1234"})]})}),e.jsxs($,{children:[e.jsx(t,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(t,{variant:"glow",onClick:()=>b.mutate({plate:l}),disabled:!l,children:"Register"})]})]})}),e.jsx(q,{open:!!c,onOpenChange:s=>!s&&d(null),onConfirm:()=>{c&&k.mutate(c),d(null)},title:"Delete truck?",description:"This will permanently remove the truck and cannot be undone.",confirmLabel:"Delete"})]})}export{je as default};
