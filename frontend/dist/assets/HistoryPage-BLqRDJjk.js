import{u as m,j as e}from"./vendor-query-CF9v-Zna.js";import{P as x,C as h,c as j,B as p,l as u,n as f}from"./card-BhKIbSNR.js";import{H as y,G as b,h as g,q as N}from"./index-CEOHBZb-.js";import{E as T}from"./EmptyState-CSoHTzce.js";import{T as w}from"./Skeletons-CfQltb1a.js";import{T as C,a as H,b as A,c as a,d as R,e as r}from"./table-BH3eB_Rj.js";import{g as k}from"./gate-CRNuKIBj.js";import{m as v}from"./vendor-motion-BvnwsIwX.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-http-BN7VjlME.js";function Q(){const{data:t,isLoading:c}=m({queryKey:N.gateScanHistory,queryFn:k.getHistory,refetchInterval:1e4});return e.jsx(x,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Scan History"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recent gate access scans"})]}),e.jsx(h,{children:e.jsx(j,{className:"p-0",children:c?e.jsx("div",{className:"p-6",children:e.jsx(w,{})}):t!=null&&t.length?e.jsxs(C,{children:[e.jsx(H,{children:e.jsxs(A,{children:[e.jsx(a,{children:"Result"}),e.jsx(a,{children:"Gate"}),e.jsx(a,{children:"Booking"}),e.jsx(a,{children:"Reason"}),e.jsx(a,{children:"Time"})]})}),e.jsx(R,{children:t.map((s,l)=>{var n,o,d;const i=s.result===b.ALLOWED;return e.jsxs(v.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:l*.02},className:"border-b border-border/50",children:[e.jsx(r,{children:e.jsxs(p,{className:i?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-red-500/20 text-red-400 border-red-500/30",children:[i?e.jsx(u,{className:"h-3 w-3 mr-1"}):e.jsx(f,{className:"h-3 w-3 mr-1"}),i?"Allowed":"Denied"]})}),e.jsx(r,{className:"text-sm font-medium",children:((n=s.gate)==null?void 0:n.name)||((o=s.gateId)==null?void 0:o.slice(0,8))||"—"}),e.jsxs(r,{className:"font-mono text-xs text-muted-foreground",children:[(d=s.bookingId)==null?void 0:d.slice(0,8),"…"]}),e.jsx(r,{className:"text-sm text-muted-foreground max-w-[200px] truncate",children:s.reason||"—"}),e.jsx(r,{className:"text-sm text-muted-foreground",children:g(s.createdAt)})]},s.id)})})]}):e.jsx(T,{title:"No scan history",description:"Scans will appear here after you verify bookings",icon:e.jsx(y,{className:"h-8 w-8 text-muted-foreground"})})})})]})})}export{Q as default};
