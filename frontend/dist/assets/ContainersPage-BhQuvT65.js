import{f as T,a as m,u as D,h as p,j as e}from"./vendor-query-CF9v-Zna.js";import{B as a,i as S,h as w,b as n,q as u}from"./index-CEOHBZb-.js";import{P as E,C as R,c as k,S as q}from"./card-BhKIbSNR.js";import{E as A}from"./EmptyState-CSoHTzce.js";import{T as F}from"./Skeletons-CfQltb1a.js";import{T as P,C as I}from"./ConfirmDialog-I5Y_R0U2.js";import{E as B}from"./ErrorAlert-DJ0FKV30.js";import{I as K}from"./input-DYGPj4ji.js";import{L}from"./label-BxPWq3jm.js";import{D as Q,a as H,b as M,c as O,d as U,e as z}from"./dialog-BAM1R5W1.js";import{T as G,a as J,b as V,c as i,d as W,e as o}from"./table-BH3eB_Rj.js";import{c as x}from"./carrier-DbPZWpzb.js";import{P as C}from"./plus-Bw4WFV0g.js";import{A as X,m as Y}from"./vendor-motion-BvnwsIwX.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-http-BN7VjlME.js";import"./circle-alert-CA5_1Jce.js";function pe(){const h=T(),[f,r]=m.useState(!1),[l,j]=m.useState(""),[c,d]=m.useState(null),{data:t,isLoading:g,isError:b,refetch:y}=D({queryKey:u.containers,queryFn:x.getContainers}),N=p({mutationFn:x.createContainer,onSuccess:()=>{h.invalidateQueries({queryKey:u.containers}),r(!1),j(""),n.success("Container registered")},onError:()=>n.error("Failed to register container")}),v=p({mutationFn:x.deleteContainer,onSuccess:()=>{h.invalidateQueries({queryKey:u.containers}),n.success("Container deleted")},onError:()=>n.error("Failed to delete container")});return b?e.jsx(B,{onRetry:y}):e.jsxs(E,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Containers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your containers"})]}),e.jsxs(a,{variant:"glow",onClick:()=>r(!0),children:[e.jsx(C,{className:"h-4 w-4"}),"Register Container"]})]}),e.jsx(R,{children:e.jsx(k,{className:"p-0",children:g?e.jsx("div",{className:"p-6",children:e.jsx(F,{})}):t!=null&&t.length?e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(V,{children:[e.jsx(i,{children:"Container Number"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Registered"}),e.jsx(i,{className:"w-16"})]})}),e.jsx(W,{children:e.jsx(X,{children:t.map(s=>e.jsxs(Y.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border-b border-border/50 transition-colors hover:bg-muted/30",children:[e.jsx(o,{className:"font-mono font-semibold",children:s.containerNumber}),e.jsx(o,{children:e.jsx(q,{status:s.status})}),e.jsx(o,{className:"text-muted-foreground",children:w(s.createdAt)}),e.jsx(o,{children:e.jsx(a,{variant:"ghost",size:"icon",onClick:()=>d(s.id),children:e.jsx(P,{className:"h-4 w-4 text-destructive"})})})]},s.id))})})]}):e.jsx(A,{title:"No containers",description:"Register a container to start tracking",icon:e.jsx(S,{className:"h-8 w-8 text-muted-foreground"}),action:e.jsxs(a,{variant:"outline",onClick:()=>r(!0),children:[e.jsx(C,{className:"mr-1 h-4 w-4"}),"Register Container"]})})})})]}),e.jsx(Q,{open:f,onOpenChange:r,children:e.jsxs(H,{children:[e.jsxs(M,{children:[e.jsx(O,{children:"Register Container"}),e.jsx(U,{children:"Add a container (ISO 6346 format)"})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Container Number"}),e.jsx(K,{value:l,onChange:s=>j(s.target.value.toUpperCase()),placeholder:"MSCU1234567"})]})}),e.jsxs(z,{children:[e.jsx(a,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(a,{variant:"glow",onClick:()=>N.mutate({containerNumber:l}),disabled:!l,children:"Register"})]})]})}),e.jsx(I,{open:!!c,onOpenChange:s=>!s&&d(null),onConfirm:()=>{c&&v.mutate(c),d(null)},title:"Delete container?",description:"This will permanently remove the container and cannot be undone.",confirmLabel:"Delete"})]})}export{pe as default};
