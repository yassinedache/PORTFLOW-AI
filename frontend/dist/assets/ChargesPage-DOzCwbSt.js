import{u as m,j as e,a as p}from"./vendor-query-CF9v-Zna.js";import{P as d,C as u,c as f,S as g}from"./card-BhKIbSNR.js";import{D as y,q as h,o as N,h as b,j as t}from"./index-CEOHBZb-.js";import{E as C}from"./EmptyState-CSoHTzce.js";import{T as w}from"./Skeletons-CfQltb1a.js";import{E as v}from"./ErrorAlert-DJ0FKV30.js";import{T,a as E,b as S,c as n,d as D,e as i}from"./table-BH3eB_Rj.js";import{c as j}from"./carrier-DbPZWpzb.js";import{m as x,A as P}from"./vendor-motion-BvnwsIwX.js";import{C as q}from"./chevron-down-CVmmBZsX.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-http-BN7VjlME.js";import"./circle-alert-CA5_1Jce.js";function F({booking:s,index:o}){var l;const[a,c]=p.useState(!1),{data:r}=m({queryKey:h.bookingCharges(s.id),queryFn:()=>j.getBookingCharges(s.id),enabled:a});return e.jsxs(e.Fragment,{children:[e.jsxs(x.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:o*.02},className:"border-b border-border/50 cursor-pointer hover:bg-muted/30",onClick:()=>c(!a),children:[e.jsx(i,{className:"w-8",children:a?e.jsx(q,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(i,{className:"font-medium",children:((l=s.terminal)==null?void 0:l.name)||"—"}),e.jsx(i,{children:e.jsx(g,{status:s.status})}),e.jsx(i,{className:"text-muted-foreground",children:b(s.createdAt)}),e.jsx(i,{className:"text-right font-semibold",children:s.price!=null?t(s.price):"—"})]}),e.jsx(P,{children:a&&e.jsx(x.tr,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsx(i,{colSpan:5,className:"bg-muted/20 p-0",children:r?e.jsxs("div",{className:"px-8 py-3 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Slot Cost"}),e.jsx("span",{children:t(r.slotCost)})]}),r.ecoDiscount>0&&e.jsxs("div",{className:"flex justify-between text-green-400",children:[e.jsx("span",{children:"Eco Discount"}),e.jsxs("span",{children:["-",t(r.ecoDiscount)]})]}),r.priorityFee>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Priority Fee"}),e.jsx("span",{children:t(r.priorityFee)})]}),r.penalties>0&&e.jsxs("div",{className:"flex justify-between text-red-400",children:[e.jsx("span",{children:"Penalties"}),e.jsx("span",{children:t(r.penalties)})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t border-border/50 pt-1 mt-1",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:t(r.total)})]})]}):e.jsx("div",{className:"px-8 py-3 text-sm text-muted-foreground",children:"Loading…"})})})})]})}function U(){const{data:s,isLoading:o,isError:a,refetch:c}=m({queryKey:h.myBookings,queryFn:j.getMyBookings});return a?e.jsx(d,{children:e.jsx(v,{onRetry:c})}):e.jsx(d,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Charges"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View charges breakdown for each booking"})]}),e.jsx(u,{children:e.jsx(f,{className:"p-0",children:o?e.jsx("div",{className:"p-6",children:e.jsx(w,{})}):s!=null&&s.length?e.jsxs(T,{children:[e.jsx(E,{children:e.jsxs(S,{children:[e.jsx(n,{className:"w-8"}),e.jsx(n,{children:"Terminal"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Date"}),e.jsx(n,{className:"text-right",children:"Price"})]})}),e.jsx(D,{children:s.map((r,l)=>e.jsx(F,{booking:r,index:l},r.id))})]}):e.jsx(C,{title:"No charges",description:"Charges appear when you create bookings",icon:e.jsx(y,{className:"h-8 w-8 text-muted-foreground"})})})})]})})}export{U as default};
