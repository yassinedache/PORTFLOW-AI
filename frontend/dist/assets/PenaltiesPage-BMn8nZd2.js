import{u as f,j as e}from"./vendor-query-CF9v-Zna.js";import{P as g,k as N,C as b,c as y}from"./card-BhKIbSNR.js";import{x as l,D as T,j as m,F as C,h as w,q as v}from"./index-CEOHBZb-.js";import{E as A}from"./EmptyState-CSoHTzce.js";import{M as i}from"./MetricCard-gxQkTWwy.js";import{C as P,T as S}from"./Skeletons-CfQltb1a.js";import{E}from"./ErrorAlert-DJ0FKV30.js";import{T as k,a as L,b as q,c as o,d as D,e as a}from"./table-BH3eB_Rj.js";import{o as H}from"./operator-CmVVUFZE.js";import{C as O}from"./circle-alert-CA5_1Jce.js";import{m as R}from"./vendor-motion-BvnwsIwX.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-http-BN7VjlME.js";const F={[l.NO_SHOW]:{label:"No-Show",color:"text-red-400"},[l.LATE]:{label:"Late Arrival",color:"text-yellow-400"}};function Z(){const{data:s,isLoading:n,isError:x,refetch:h}=f({queryKey:v.penalties,queryFn:H.getPenalties}),j=(s==null?void 0:s.reduce((r,t)=>r+t.amount,0))??0,u=(s==null?void 0:s.filter(r=>r.type===l.NO_SHOW).length)??0,p=(s==null?void 0:s.filter(r=>r.type===l.LATE).length)??0;return x?e.jsx(E,{onRetry:h}):e.jsx(g,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Penalties"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage penalties issued to carriers"})]}),n?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:Array.from({length:3}).map((r,t)=>e.jsx(P,{},t))}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(i,{title:"Total Penalties",value:m(j),icon:e.jsx(T,{className:"h-5 w-5"}),color:"red"}),e.jsx(i,{title:"No-Shows",value:u,icon:e.jsx(O,{className:"h-5 w-5"}),color:"red"}),e.jsx(i,{title:"Late Arrivals",value:p,icon:e.jsx(N,{className:"h-5 w-5"}),color:"yellow"})]}),e.jsx(b,{children:e.jsx(y,{className:"p-0",children:n?e.jsx("div",{className:"p-6",children:e.jsx(S,{})}):s!=null&&s.length?e.jsxs(k,{children:[e.jsx(L,{children:e.jsxs(q,{children:[e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Booking"}),e.jsx(o,{children:"Reason"}),e.jsx(o,{children:"Date"}),e.jsx(o,{className:"text-right",children:"Amount"})]})}),e.jsx(D,{children:s.map((r,t)=>{var d;const c=F[r.type]||{label:r.type,color:"text-muted-foreground"};return e.jsxs(R.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:t*.03},className:"border-b border-border/50",children:[e.jsx(a,{children:e.jsx("span",{className:`font-medium text-sm ${c.color}`,children:c.label})}),e.jsxs(a,{className:"font-mono text-xs text-muted-foreground",children:[(d=r.bookingId)==null?void 0:d.slice(0,8),"…"]}),e.jsx(a,{className:"text-sm text-muted-foreground max-w-[200px] truncate",children:r.reason||"—"}),e.jsx(a,{className:"text-sm text-muted-foreground",children:w(r.createdAt)}),e.jsx(a,{className:"text-right font-semibold text-red-400",children:m(r.amount)})]},r.id)})})]}):e.jsx(A,{title:"No penalties",description:"Penalties will appear when carriers violate booking rules",icon:e.jsx(C,{className:"h-8 w-8 text-muted-foreground"})})})})]})})}export{Z as default};
