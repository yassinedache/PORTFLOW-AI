const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OverviewCharts-p9LZLoKV.js","assets/vendor-query-CF9v-Zna.js","assets/card-BhKIbSNR.js","assets/index-CEOHBZb-.js","assets/vendor-react-lqZWVjLj.js","assets/vendor-charts-sdUO6Spa.js","assets/vendor-radix-D-AkJh5d.js","assets/vendor-motion-BvnwsIwX.js","assets/vendor-http-BN7VjlME.js","assets/index-6pwI-LJU.css","assets/trending-up-BqOhrqLL.js"])))=>i.map(i=>d[i]);
import{q as l,d as N,C,e as w,_ as T}from"./index-CEOHBZb-.js";import{u as m,e as A,a as d,j as e}from"./vendor-query-CF9v-Zna.js";import{P as _,C as k,a as q,b as E,c as P}from"./card-BhKIbSNR.js";import{M as o}from"./MetricCard-gxQkTWwy.js";import{P as S}from"./Skeletons-CfQltb1a.js";import{E as O}from"./ErrorAlert-DJ0FKV30.js";import{a as n}from"./admin-C8fNhm0J.js";import{D}from"./door-open-BR1_l2_f.js";import{m as K}from"./vendor-motion-BvnwsIwX.js";import"./vendor-react-lqZWVjLj.js";import"./vendor-charts-sdUO6Spa.js";import"./vendor-radix-D-AkJh5d.js";import"./vendor-http-BN7VjlME.js";import"./circle-alert-CA5_1Jce.js";const L=d.lazy(()=>T(()=>import("./OverviewCharts-p9LZLoKV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])));function X(){const{data:s,isLoading:u,isError:x,refetch:h}=m({queryKey:l.terminals,queryFn:n.getTerminals}),{data:p,isLoading:j}=m({queryKey:l.waitingTime(),queryFn:()=>n.getWaitingTimeAnalytics(void 0,30)}),c=new Date().toISOString().split("T")[0],g=A({queries:(s??[]).map(a=>({queryKey:l.slotsAvailability(a.id,c),queryFn:()=>n.getSlotAvailability(a.id,c),enabled:!!(s!=null&&s.length)}))}),v=d.useMemo(()=>g.reduce((a,r)=>r.data?a+r.data.reduce((i,t)=>i+t.availableCount,0):a,0),[g]);if(u)return e.jsx(S,{});if(x)return e.jsx(O,{onRetry:h});const y=(s==null?void 0:s.reduce((a,r)=>{var i;return a+(((i=r.gates)==null?void 0:i.length)||0)},0))||0,f=(s==null?void 0:s.reduce((a,r)=>{var i;return a+(((i=r._count)==null?void 0:i.bookings)||0)},0))||0,b=(s==null?void 0:s.filter(a=>a.isActive).length)||0;return e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor your port infrastructure"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(o,{title:"Terminals",value:(s==null?void 0:s.length)||0,subtitle:`${b} active`,icon:e.jsx(N,{className:"h-5 w-5"}),glowColor:"rgba(59, 130, 246, 0.15)"}),e.jsx(o,{title:"Gates",value:y,icon:e.jsx(D,{className:"h-5 w-5"}),glowColor:"rgba(99, 102, 241, 0.15)"}),e.jsx(o,{title:"Total Bookings",value:f,icon:e.jsx(C,{className:"h-5 w-5"}),glowColor:"rgba(16, 185, 129, 0.15)"}),e.jsx(o,{title:"Active Slots",value:v,icon:e.jsx(w,{className:"h-5 w-5"}),glowColor:"rgba(245, 158, 11, 0.15)"})]}),e.jsx(d.Suspense,{fallback:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:"h-80 animate-shimmer rounded-lg"}),e.jsx("div",{className:"h-80 animate-shimmer rounded-lg"})]}),children:e.jsx(L,{analytics:p,loading:j})}),e.jsxs(k,{children:[e.jsx(q,{children:e.jsx(E,{children:"Terminals"})}),e.jsx(P,{children:e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",children:s==null?void 0:s.map((a,r)=>{var i,t;return e.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.05},whileHover:{y:-2},className:"glass rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:a.name}),e.jsx("span",{className:`h-2 w-2 rounded-full ${a.isActive?"bg-success":"bg-destructive"}`})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:a.location}),e.jsxs("div",{className:"mt-3 flex gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[((i=a.gates)==null?void 0:i.length)||0," gates"]}),e.jsxs("span",{children:[((t=a._count)==null?void 0:t.bookings)||0," bookings"]})]})]},a.id)})})})]})]})})}export{X as default};
